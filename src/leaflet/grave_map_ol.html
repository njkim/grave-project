<html>

<head>
	<meta charset="UTF-8">
	<title>Grave-project-OpenLayer</title>
	<link rel="stylesheet" href="scripts/ol.css" />
	<script src="scripts/ol.js"></script>
<!--	<script src="scripts/jquery-3.1.1.min.js"></script>
-->	
	<style>
		.map{        
			height: 80%;
			width: 100%;
			}
	</style>
</head>

<body>
	<h2>Grave Project Map</h2>
	<div id="map" class="map"></div>
	<script type="text/javascript">
/*
		var interred_json = [
			{"grave_id":1,"person":"Evelyn Spence"},
			{"grave_id":1,"person":"Bud Spence"},
			{"grave_id":2,"person":"Pam Corrow"},
			{"grave_id":3,"person":"Dorothy Lodge"},
			{"grave_id":4,"person":"Hilmer Lodge"},
			{"grave_id":5,"person":"Eric Lodge"},
			{"grave_id":5,"person":"Suellen Lodge"},
			{"grave_id":6,"person":"Adam Lodge"},
			{"grave_id":7,"person":"Cesar Arteaga"},
			{"grave_id":8,"person":"Ginny Spence"},
			{"grave_id":9,"person":"Betsy Bremer"},
			{"grave_id":10,"person":"Raymond Lodge"},
			{"grave_id":11,"person":"Rosemary Otto"},
			{"grave_id":12,"person":"Julann Lodge"},
			{"grave_id":12,"person":"Sebastian Arteaga"},
			{"grave_id":12,"person":"Odin Arteaga"},
			{"grave_id":12,"person":"John Smith"},
			{"grave_id":13,"person":"David Lodge"},
			{"grave_id":14,"person":"John Corrow"},
			{"grave_id":15,"person":"Carl Corrow"},
			{"grave_id":16,"person":"Carl Corrow II"},
			{"grave_id":16,"person":"Jodi Corrow"},
			{"grave_id":16,"person":"Bridgett Corrow"},
			{"grave_id":16,"person":"Addison Corrow"},
			{"grave_id":17,"person":"Kai Lodge"},
			{"grave_id":20,"person":"Almetria Vaba"}
			];

		var relationship_json = [
			{"person1":"Adam Lodge","person2":"Almetria Vaba","relationship":"Spouse"},
			{"person1":"Adam Lodge","person2":"Kai Lodge","relationship":"Parent"},
			{"person1":"Almetria Vaba","person2":"Kai Lodge","relationship":"Parent"},
			{"person1":"Bud Spence","person2":"Ginny Spence","relationship":"Parent"},
			{"person1":"Bud Spence","person2":"Pam Corrow","relationship":"Parent"},
			{"person1":"Carl Corrow","person2":"Carl Corrow II","relationship":"Parent"},
			{"person1":"Carl Corrow","person2":"John Corrow","relationship":"Parent"},
			{"person1":"Carl Corrow II","person2":"Addison Corrow","relationship":"Parent"},
			{"person1":"Carl Corrow II","person2":"Bridgett Corrow","relationship":"Parent"},
			{"person1":"Carl Corrow II","person2":"Jodi Corrow","relationship":"Spouse"},
			{"person1":"Dorothy Lodge","person2":"Rosemary Otto","relationship":"Parent"},
			{"person1":"Dorothy Lodge","person2":"Eric Lodge","relationship":"Parent"},
			{"person1":"Dorothy Lodge","person2":"Betsy Bremer","relationship":"Parent"},
			{"person1":"Dorothy Lodge","person2":"Raymond Lodge","relationship":"Parent"},
			{"person1":"Eric Lodge","person2":"Ginny Spence","relationship":"Spouse"},
			{"person1":"Eric Lodge","person2":"Suellen Lodge","relationship":"Spouse"},
			{"person1":"Eric Lodge","person2":"Julann Lodge","relationship":"Parent"},
			{"person1":"Eric Lodge","person2":"David Lodge","relationship":"Parent"},
			{"person1":"Eric Lodge","person2":"Adam Lodge","relationship":"Parent"},
			{"person1":"Evelyn Spence","person2":"Ginny Spence","relationship":"Parent"},
			{"person1":"Evelyn Spence","person2":"Pam Corrow","relationship":"Parent"},
			{"person1":"Evelyn Spence","person2":"Bud Spence","relationship":"Spouse"},
			{"person1":"Ginny Spence","person2":"Adam Lodge","relationship":"Parent"},
			{"person1":"Ginny Spence","person2":"David Lodge","relationship":"Parent"},
			{"person1":"Ginny Spence","person2":"Julann Lodge","relationship":"Parent"},
			{"person1":"Hilmer Lodge","person2":"Rosemary Otto","relationship":"Parent"},
			{"person1":"Hilmer Lodge","person2":"Raymond Lodge","relationship":"Parent"},
			{"person1":"Hilmer Lodge","person2":"Eric Lodge","relationship":"Parent"},
			{"person1":"Hilmer Lodge","person2":"Betsy Bremer","relationship":"Parent"},
			{"person1":"Jodi Corrow","person2":"Addison Corrow","relationship":"Parent"},
			{"person1":"Jodi Corrow","person2":"Bridgett Corrow","relationship":"Parent"},
			{"person1":"Julann Lodge","person2":"John Smith","relationship":"Spouse"},
			{"person1":"Julann Lodge","person2":"Odin Arteaga","relationship":"Parent"},
			{"person1":"Julann Lodge","person2":"Sebastian Arteaga","relationship":"Parent"},
			{"person1":"Pam Corrow","person2":"Carl Corrow","relationship":"Spouse"},
			{"person1":"Pam Corrow","person2":"John Corrow","relationship":"Parent"},
			{"person1":"Pam Corrow","person2":"Carl Corrow II","relationship":"Parent"},
			{"person1":"Dorothy Lodge","person2":"Hilmer Lodge","relationship":"Spouse"},
			{"person1":"Almetria Vaba","person2":"Adam Lodge","relationship":"Spouse"},
			{"person1":"Bud Spence","person2":"Evelyn Spence","relationship":"Spouse"},
			{"person1":"Carl Corrow","person2":"Pam Corrow","relationship":"Spouse"},
			{"person1":"Ginny Spence","person2":"Eric Lodge","relationship":"Spouse"},
			{"person1":"Hilmer Lodge","person2":"Dorothy Lodge","relationship":"Spouse"},
			{"person1":"Jodi Corrow","person2":"Carl Corrow II","relationship":"Spouse"},
			{"person1":"John Smith","person2":"Julann Lodge","relationship":"Spouse"},
			{"person1":"Suellen Lodge","person2":"Eric Lodge","relationship":"Spouse"},
			{"person1":"Adam Lodge","person2":"Ginny Spence","relationship":"Child"},
			{"person1":"Adam Lodge","person2":"Eric Lodge","relationship":"Child"},
			{"person1":"Addison Corrow","person2":"Jodi Corrow","relationship":"Child"},
			{"person1":"Addison Corrow","person2":"Carl Corrow II","relationship":"Child"},
			{"person1":"Betsy Bremer","person2":"Hilmer Lodge","relationship":"Child"},
			{"person1":"Betsy Bremer","person2":"Dorothy Lodge","relationship":"Child"},
			{"person1":"Bridgett Corrow","person2":"Jodi Corrow","relationship":"Child"},
			{"person1":"Bridgett Corrow","person2":"Carl Corrow II","relationship":"Child"},
			{"person1":"Carl Corrow II","person2":"Pam Corrow","relationship":"Child"},
			{"person1":"Carl Corrow II","person2":"Carl Corrow","relationship":"Child"},
			{"person1":"David Lodge","person2":"Ginny Spence","relationship":"Child"},
			{"person1":"David Lodge","person2":"Eric Lodge","relationship":"Child"},
			{"person1":"Eric Lodge","person2":"Hilmer Lodge","relationship":"Child"},
			{"person1":"Eric Lodge","person2":"Dorothy Lodge","relationship":"Child"},
			{"person1":"Ginny Spence","person2":"Evelyn Spence","relationship":"Child"},
			{"person1":"Ginny Spence","person2":"Bud Spence","relationship":"Child"},
			{"person1":"John Corrow","person2":"Pam Corrow","relationship":"Child"},
			{"person1":"John Corrow","person2":"Carl Corrow","relationship":"Child"},
			{"person1":"Julann Lodge","person2":"Ginny Spence","relationship":"Child"},
			{"person1":"Julann Lodge","person2":"Eric Lodge","relationship":"Child"},
			{"person1":"Kai Lodge","person2":"Almetria Vaba","relationship":"Child"},
			{"person1":"Kai Lodge","person2":"Adam Lodge","relationship":"Child"},
			{"person1":"Odin Arteaga","person2":"Julann Lodge","relationship":"Child"},
			{"person1":"Pam Corrow","person2":"Evelyn Spence","relationship":"Child"},
			{"person1":"Pam Corrow","person2":"Bud Spence","relationship":"Child"},
			{"person1":"Raymond Lodge","person2":"Hilmer Lodge","relationship":"Child"},
			{"person1":"Raymond Lodge","person2":"Dorothy Lodge","relationship":"Child"},
			{"person1":"Rosemary Otto","person2":"Hilmer Lodge","relationship":"Child"},
			{"person1":"Rosemary Otto","person2":"Dorothy Lodge","relationship":"Child"},
			{"person1":"Sebastian Arteaga","person2":"Julann Lodge","relationship":"Child"}
			];
*/

		var grave_geojson = {
			"type": "FeatureCollection",
			"name": "grave",
			"crs": { "type": "name", "properties": { "name": "EPSG:4326" } },
			"features": [
			{ "type": "Feature", "properties": { "grave_id": 1, "lat": 42.2666, "lon": -71.8 }, "geometry": { "type": "Point", "coordinates": [ -71.8, 42.2666 ] } },
			{ "type": "Feature", "properties": { "grave_id": 2, "lat": 42.8666, "lon": -73.816 }, "geometry": { "type": "Point", "coordinates": [ -73.816, 42.8666 ] } },
			{ "type": "Feature", "properties": { "grave_id": 3, "lat": 33.3033, "lon": -116.981 }, "geometry": { "type": "Point", "coordinates": [ -116.981, 33.3033 ] } },
			{ "type": "Feature", "properties": { "grave_id": 4, "lat": 33.3034, "lon": -116.982 }, "geometry": { "type": "Point", "coordinates": [ -116.982, 33.3034 ] } },
			{ "type": "Feature", "properties": { "grave_id": 5, "lat": 32.9952, "lon": -117.26 }, "geometry": { "type": "Point", "coordinates": [ -117.2603, 32.9952 ] } },
			{ "type": "Feature", "properties": { "grave_id": 6, "lat": 37.6688, "lon": -122.081 }, "geometry": { "type": "Point", "coordinates": [ -122.0808, 37.6688 ] } },
			{ "type": "Feature", "properties": { "grave_id": 7, "lat": 20.914, "lon": -100.744 }, "geometry": { "type": "Point", "coordinates": [ -100.7436, 20.914 ] } },
			{ "type": "Feature", "properties": { "grave_id": 8, "lat": 37.6688, "lon": -122.081 }, "geometry": { "type": "Point", "coordinates": [ -122.0808, 37.6688 ] } },
			{ "type": "Feature", "properties": { "grave_id": 9, "lat": 21.3, "lon": -157.817 }, "geometry": { "type": "Point", "coordinates": [ -157.81666, 21.3 ] } },
			{ "type": "Feature", "properties": { "grave_id": 10, "lat": 32.99, "lon": -117.2 }, "geometry": { "type": "Point", "coordinates": [ -117.2, 32.99 ] } },
			{ "type": "Feature", "properties": { "grave_id": 11, "lat": 47.659, "lon": -117.425 }, "geometry": { "type": "Point", "coordinates": [ -117.425, 47.659 ] } },
			{ "type": "Feature", "properties": { "grave_id": 12, "lat": 33.122, "lon": -117.297 }, "geometry": { "type": "Point", "coordinates": [ -117.297, 33.122 ] } },
			{ "type": "Feature", "properties": { "grave_id": 13, "lat": 37.6688, "lon": -122.081 }, "geometry": { "type": "Point", "coordinates": [ -122.0808, 37.6688 ] } },
			{ "type": "Feature", "properties": { "grave_id": 14, "lat": 41.8, "lon": -71.422 }, "geometry": { "type": "Point", "coordinates": [ -71.422, 41.8 ] } },
			{ "type": "Feature", "properties": { "grave_id": 15, "lat": 37.6688, "lon": -122.081 }, "geometry": { "type": "Point", "coordinates": [ -122.0808, 37.6688 ] } },
			{ "type": "Feature", "properties": { "grave_id": 16, "lat": 41.8, "lon": -71.422 }, "geometry": { "type": "Point", "coordinates": [ -71.422, 41.8 ] } },
			{ "type": "Feature", "properties": { "grave_id": 17, "lat": 27.988, "lon": 86.925 }, "geometry": { "type": "Point", "coordinates": [ 86.925, 27.988 ] } },
			{ "type": "Feature", "properties": { "grave_id": 20, "lat": 37.6688, "lon": -122.081 }, "geometry": { "type": "Point", "coordinates": [ -122.0808, 37.6688 ] } }
			]};

		var waterColorLayer = new ol.layer.Tile({
			source: new ol.source.Stamen({
			layer: 'watercolor'
			})
		});

		var gravePoint = new ol.source.Vector({
			features: (new ol.format.GeoJSON()).readFeatures(grave_geojson, {
            featureProjection: 'EPSG:3857'})
		});

		var graveLayer = new ol.layer.Vector({
			source: gravePoint
		});

		var iconStyle = new ol.style.Style({
			image: new ol.style.Icon(({
				src: 'scripts/images/rip.png',
				scale: 0.15
			}))
		});

		graveLayer.setStyle(iconStyle);

		var map = new ol.Map({
			target: 'map',
			layers: [waterColorLayer, graveLayer],
			view: new ol.View({
				center: ol.proj.fromLonLat([-35, 20]),
				zoom: 3				
			})
		});

/*

		var getInterred = function(input_id) {
			var return_string = '';
			for (var i = 0; i < interred_json.length; i++) {
				if (interred_json[i].grave_id == input_id) {
					return_string = return_string + "<a href=\"#\" onclick=\"alert('" + getRelated(interred_json[i].person) + "');\">" + interred_json[i].person + "</a></br>";
				};
			};
			return return_string;
		};
		
		var getRelated = function(person) {
			var return_string = '';
			for (var i = 0; i < relationship_json.length; i++) {
				if (relationship_json[i].person1 == person) {
					return_string = return_string + relationship_json[i].relationship + ' of ' + relationship_json[i].person2 + '  ';
				};
			};
			return return_string;
		};

		var pointToLayer = function(feature,latlng){
			var marker = L.marker(latlng, {icon: tombstone});
			marker.bindPopup('<strong>' + 'Grave ' + feature.properties.grave_id + '</strong></br>'
					+ getInterred(feature.properties.grave_id));
			return marker;
		};

		L.geoJson(grave_geojson, {
								pointToLayer: pointToLayer
								}).addTo(map);

*/

	</script>
</body>
</html>